<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Flappy Ball 67 â€” SYBAU</title>

<style>
  html,body {
    height:100%;
    margin:0;
    background:#000;
    overflow:hidden;
    font-family: Arial, sans-serif;
  }

  body {
    background-image: url('/mnt/data/533087D8-BBA6-440C-A5A1-20777FC4E23B.jpeg');
    background-size:cover;
    background-position:center;
    background-repeat:no-repeat;
  }

  #gameWrap {
    position:relative;
    width:100%;
    height:100vh;
  }

  canvas {
    width:100%;
    height:100%;
    display:block;
  }

  #hud {
    position:absolute;
    top:15px;
    left:50%;
    transform:translateX(-50%);
    font-size:26px;
    font-weight:bold;
    color:white;
    text-shadow:0 4px 8px rgba(0,0,0,0.7);
  }

  #gameOver {
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    background:rgba(0,0,0,0.7);
    padding:25px;
    border-radius:12px;
    text-align:center;
    display:none;
    width:300px;
    color:white;
  }

  #restartBtn {
    margin-top:15px;
    padding:10px 20px;
    border:none;
    border-radius:8px;
    font-weight:bold;
    cursor:pointer;
    background:#00ff88;
  }
</style>
</head>

<body>

<div id="gameWrap">
  <canvas id="c"></canvas>

  <div id="hud">Score: <span id="score">0</span></div>

  <div id="gameOver">
    <h2>Game Over</h2>
    <p id="goText">You scored 0 points, nephewðŸ«©ðŸ¥€</p>
    <button id="restartBtn">Restart</button>
  </div>
</div>

<script>
(() => {

  let canvas, ctx, W, H, DPR;
  let pipes = [];
  let ball;
  let score = 0;
  let running = false;
  let frame = 0;

  const GRAV = 0.5;
  const JUMP = -7.8;          // SMALLER JUMP
  const PIPE_GAP = 185;       // BIGGER GAP
  const PIPE_SPEED = 2.6;
  const PIPE_WIDTH = 80;
  const SPAWN_INTERVAL = 105;

  const bg = new Image();
  bg.src = '/mnt/data/533087D8-BBA6-440C-A5A1-20777FC4E23B.jpeg';

  const goOverlay = document.getElementById("gameOver");
  const restartBtn = document.getElementById("restartBtn");
  const scoreEl = document.getElementById("score");
  const goText = document.getElementById("goText");

  restartBtn.onclick = restart;

  function setupCanvas() {
    canvas = document.getElementById("c");
    DPR = window.devicePixelRatio || 1;

    function resize() {
      W = window.innerWidth;
      H = window.innerHeight;
      canvas.width = W * DPR;
      canvas.height = H * DPR;
      canvas.style.width = W + "px";
      canvas.style.height = H + "px";
      ctx = canvas.getContext("2d");
      ctx.setTransform(DPR,0,0,DPR,0,0);
      ctx.textBaseline = "middle";
    }

    window.addEventListener("resize", resize);
    resize();
  }

  function createBall() {
    return {
      x: W * 0.25,
      y: H / 2,
      r: Math.min(28, Math.floor(Math.min(W,H)/18)),
      vy: 0,
      alive: true,
      draw() {
        ctx.save();
        ctx.beginPath();
        ctx.shadowColor = "rgba(0,150,255,0.5)";
        ctx.shadowBlur = 18;
        ctx.fillStyle = "white";
        ctx.arc(this.x, this.y, this.r, 0, Math.PI * 2);
        ctx.fill();
        ctx.restore();

        ctx.beginPath();
        ctx.strokeStyle = "#00ccff";
        ctx.lineWidth = 3;
        ctx.arc(this.x, this.y, this.r-1.5, 0, Math.PI*2);
        ctx.stroke();

        ctx.fillStyle = "#001020";
        ctx.font = `bold ${this.r}px Arial`;
        ctx.textAlign = "center";
        ctx.fillText("67", this.x, this.y+1);
      },
      update() {
        this.vy += GRAV;
        this.y += this.vy;

        if (this.y + this.r > H) {
          this.y = H - this.r;
          this.vy = 0;
          die();
        }

        if (this.y - this.r < 0) {
          this.y = this.r;
          this.vy = 0;
        }
      },
      jump() {
        this.vy = JUMP;
      }
    }
  }

  function createPipe(x) {
    const minY = 70;
    const maxY = H - 70 - PIPE_GAP;
    const top = minY + Math.random() * (maxY - minY);

    return {
      x,
      topY: top,
      bottomY: top + PIPE_GAP,
      width: PIPE_WIDTH,
      passed: false,
      draw() {
        ctx.fillStyle = "#0d7a3b";

        ctx.fillRect(this.x, 0, this.width, this.topY);
        ctx.fillRect(this.x, this.bottomY, this.width, H - this.bottomY);

        ctx.save();
        ctx.fillStyle = "white";
        ctx.font = "bold 20px Arial";
        ctx.textAlign = "center";

        const letters = ["S","Y","B","A","U"];
        const cx = this.x + this.width/2;

        let y1 = this.topY/2 - 40;
        for (let i=0;i<letters.length;i++)
          ctx.fillText(letters[i], cx, y1 + i*24);

        let y2 = this.bottomY + 20;
        for (let i=0;i<letters.length;i++)
          ctx.fillText(letters[i], cx, y2 + i*24);

        ctx.restore();
      },
      update() {
        this.x -= PIPE_SPEED;
      },
      isOff() { return this.x + this.width < -20; }
    }
  }

  function spawnPipe() {
    pipes.push(createPipe(W + 40));
  }

  function circleRectCollision(cx, cy, r, rx, ry, rw, rh) {
    const closestX = Math.max(rx, Math.min(cx, rx+rw));
    const closestY = Math.max(ry, Math.min(cy, ry+rh));
    const dx = cx - closestX, dy = cy - closestY;
    return dx*dx + dy*dy <= r*r;
  }

  function die() {
    running = false;
    goText.textContent = `You scored ${score} points, nephewðŸ«©ðŸ¥€`;
    goOverlay.style.display = "block";
  }

  function restart() {
    pipes = [];
    score = 0;
    scoreEl.textContent = score;
    frame = 0;
    goOverlay.style.display = "none";
    ball = createBall();
    running = true;
    loop();
  }

  function loop() {
    frame++;

    ctx.clearRect(0,0,W,H);

    if (bg.complete) {
      const iw = bg.width, ih = bg.height;
      const scale = Math.max(W/iw, H/ih);
      const sw = iw*scale, sh = ih*scale;
      ctx.drawImage(bg, (W-sw)/2, (H-sh)/2, sw, sh);
    }

    ctx.fillStyle = "rgba(0,0,0,0.25)";
    ctx.fillRect(0,0,W,H);

    if (frame % SPAWN_INTERVAL === 0) spawnPipe();

    for (let i=pipes.length-1; i>=0; i--) {
      const p = pipes[i];
      p.update();
      p.draw();

      if (circleRectCollision(ball.x, ball.y, ball.r, p.x, 0, p.width, p.topY) ||
          circleRectCollision(ball.x, ball.y, ball.r, p.x, p.bottomY, p.width, H-p.bottomY)) {
        die();
      }

      if (!p.passed && p.x + p.width < ball.x) {
        p.passed = true;
        score++;
        scoreEl.textContent = score;
      }

      if (p.isOff()) pipes.splice(i,1);
    }

    ball.draw();
    if (running) ball.update();

    if (running) requestAnimationFrame(loop);
  }

  function startInput() {
    window.addEventListener("mousedown", jump);
    window.addEventListener("touchstart", jump, {passive:true});
    window.addEventListener("keydown", (e)=>{
      if (e.code === "Space") jump();
      if (!running && e.code==="KeyR") restart();
    });
  }

  function jump() {
    if (!running) return restart();
    ball.jump();
  }

  setupCanvas();
  startInput();
  restart();

})();
</script>

</body>
</html>